# バグ解析用のログ挿入

## 指示
対象コードに「バグ発生箇所の切り分けが容易になるログ出力処理」を挿入してください。

## 目的

- ログドリブン手法で、バグ原因を早期に特定するため。

## 要件

1. **再現性のあるログ順序**を確保（時系列で因果関係を明確に）
2. **処理ステップごとにログ出力**し、「どこまで正常か」を明確化
3. **パラメータ・入力値・分岐条件**は必ずログに含める
4. **エラー箇所だけでなく、正常終了ログも残す**
5. ログの分類:
   - ` [INIT]`: 初期化・準備段階
   - `[INPUT]`: ユーザー入力や外部データの取得
   - `[PROCESS]`: 処理ステップごとの状況
   - `[OUTPUT]`: 表示や通信などの結果出力
   - `[WARN]`: 想定外の入力・例外的分岐
   - `[ERROR]`: 明確な異常・例外発生
   - `[DONE]`: 正常終了
6. 出力形式は1行1ログ、読みやすくコンパクトに（例: `JSON`, `key=value`, プレーンテキストのいずれか`）
7. トークン量が肥大化しないよう、**ログメッセージは簡潔に／重要な変数に限定**

## 入力

- `error_log`: 対象処理で出力されたエラーログ全文（Cursor Commands貼付用）
- `reproduction_steps`: 再現手順、および期待動作と実際動作の差異
- `context`: 直前のチャットログや提供済みログを含む関連コンテクスト（Cursor Commandsで呼び出し）
- `code_reference`: ログ対象となる関数／機能の概要説明
- `environment`: 言語・フレームワーク・ライブラリのバージョン情報

## 出力

- ログ出力が組み込まれたコード（可読性を維持）
- ログ出力の概要説明（どこで・何を・なぜ記録しているか）

## 制約

- ログ出力により処理ロジックが読みにくくならないよう配慮する
- 設定値・APIレスポンスなど、**再現性に影響するパラメータ**はログに含めること
- GameObjectやファイル名など、**検索キーとなる識別子**は必ず記録
