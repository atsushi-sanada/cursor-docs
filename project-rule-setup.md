# Cursor用プロジェクトをセットアップする3段階フロー

## 実行ルール

### フェーズ管理
- 各段階開始前に「前段階のタスクが完了しました。次の段階に進みますか？」とユーザーの確認をとる
- 各段階の最後に、期待通りの結果になっているか確認する

## AGENTS.md作成フェーズ
- プロジェクトルートに `AGENTS.md` を作成する
- どのようなプロジェクトなのか思想と理念を定義する
-  **AGENTS.mdテンプレートを厳守して思想と理念のみ記述する**
- 「1. プロジェクトの目的」はユーザーから入力が無ければ、現状のプロジェクトを参照して判断する
- 「2. コンセプト・思想」「3. 開発方針（判断の軸）」「4. AIのコミュニケーション方針」はユーザールール(@rules)を参照して、ユーザーの思想や理念をベースとする
- 思想と理念のみ記述して具体的なルールは記載しない
- **注意**: 作成した `AGENTS.md` で定義した思想と方針は、後続の `.cursor/rules` のルール作成時に整合させて使用する
- **必須確認**: 「AGENTS.md作成フェーズが完了しました。.cursor/rules/の提案フェーズに進んでよろしいですか？」

### AGENTS.mdテンプレート

```markdown
# プロジェクトの基本方針（AGENTS.md）

## 1. プロジェクトの目的
- このプロジェクトが「何を達成するためのものか」を明確に記述する。
- 例：ユーザーが直感的に操作できる○○機能を提供する。

## 2. コンセプト・思想
- 全体を貫く価値観や判断基準をまとめる。
- 例：読みやすさを優先、シンプルな構造を維持、ユーザー体験最優先など。

## 3. タスクの実行方針（判断の軸）
- 具体的な方針を列挙し、タスク実行時の判断の基準とする。
- 例：
  - 常にユーザー体験を最優先にする
  - コードは読みやすさと保守性を重視する  
  - 小さな単位で段階的に実装する
  - 過剰な機能追加や複雑化を避ける
  - 実装前に要件と設計を必ず明確化する
  - 再利用性の高い構造を意識する
  - 仕様変更に強い柔軟な設計を心がける

## 4. AIのコミュニケーション方針
- AIの回答に求める振る舞い。
- 例：
  - 新卒でも分かるように説明する
  - 不明点は必ず質問する
  - 推測だけで進めず、根拠を示す
  - 一度に多くの作業を進めず段階的に進行する

## 5. 適用範囲と遵守事項
- この AGENTS.md に記載された思想と方針は、AI の判断・説明・提案に常に適用される。
- .cursor/rules の具体ルールと矛盾する場合は、この方針に基づいて解決を試みる。
- AI は作業中、判断に迷った場合は必ず本ファイルの思想に立ち返る。

```

## .cursor/rules/の提案フェーズ

- **必ず `AGENTS.md` を読み込んでから開始すること**
- AGENTS.md作成フェーズで決定した思想と理念をもとに **どのようなルールを作成するか** ユーザーに提案する
- プロジェクトの内容に応じて適切なルールをリストアップする
- `doc/rule-list.md` に文書化
- **必須確認**: 「.cursor/rules/の提案フェーズが完了しました。作成フェーズに進んでよろしいですか？」

## .cursor/rules/の作成フェーズ

- **必ず `doc/rule-list.md` を読み込んでから開始すること**
- .cursor/rules/の提案フェーズでリストアップしたルールのファイルを `.cursor/rules/` 以下に作成する
- ユーザールール（@rules）に該当するルールがある場合は参照して作成する
- `AGENTS.md` の思想と理念と整合性がある内容で作成する
- 各ファイル **.mdcファイルの形式で作成**
  - 以下のメタ情報を含む：

```markdown
---
description: [ルールの説明。AGENTS.mdのどの原則に基づいているかも記載]
globs:
  - "[適用範囲のglobパターン]"
alwaysApply: [true/false]
---

[ルールの内容]
```

## エラーハンドリング

- **既存ファイル**: 上書きせずに確認を求める
- **既存フォルダ**: 既存構造を保持し、不足分のみ追加
- **中断時**: 完了したステップまでを保存し、再開時に前回の状態を確認

---